---
description: SDA violations to avoid
globs: ["**/*.py"]
alwaysApply: false
---

# SDA Anti-Patterns

## The Big Three (BANNED)
- **isinstance()** - BANNED. USE DISCRIMINATED UNIONS.
- **hasattr()/getattr()** - BANNED. USE DISCRIMINATED UNIONS.
- **if/elif chains** - BANNED. USE DISCRIMINATED UNIONS WITH StrEnum.

## Primitive Obsession
- Never use naked primitives with domain meaning
- `str` email → `Email(BaseModel)`
- `int` user_id → `UserId(BaseModel)`
- Raw dictionaries → Typed models

## Enum Anti-Patterns
- Never call `.value` on enums (defeats the purpose)
- **Never use string literals** - Create `StrEnum` instead
- Use `StrEnum` for automatic string conversion and behavioral methods
- Add behavioral methods to enums, don't extract values

## Model Anti-Patterns
- **Anemic models** - Data without behavior
- **@computed_field for constants** - Use regular fields for static values
- **Business logic in services** - Logic belongs with the data

## Zero Tolerance Policy
`isinstance/hasattr/getattr` is BANNED. No exceptions.
Use discriminated unions for ALL branching logic.
