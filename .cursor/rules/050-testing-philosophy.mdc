---
description: SDA testing approach and philosophy
globs: ["**/test*.py", "**/tests/**/*.py"]
alwaysApply: false
---

# SDA Testing Philosophy

## Core Principle
"Test the domain intelligence, trust Pydantic for the rest."

## The F1 Car Analogy
SDA has sophisticated simplicity. Like an F1 car, complexity is encoded in types:
- **Necessary** - Every piece serves a type-driven purpose
- **Elegant** - Complex discriminated unions, simple interfaces
- **Concentrated** - Type intelligence focused in discriminated unions

## Test the Intelligence, Not the Plumbing
**DO Test:**
- Business logic in computed fields
- Enum behavior and state transitions
- Model decisions and validation rules
- Domain-specific calculations
- Discriminated union dispatch logic
- Where actual business intelligence lives

**DON'T Test:**
- Pydantic serialization/deserialization
- Field validation (trust Pydantic)
- State management (trust immutability)
- Infrastructure plumbing

## SDA Test Structure
- Test cases as discriminated union domain models that validate themselves
- Dogfood SDA discriminated union principles in test design
- Concentrated tests for concentrated type intelligence
- Focus testing where discriminated union intelligence is concentrated
